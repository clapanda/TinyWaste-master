# TinyWaste é‡‘æ‰‹æŒ‡æ„å»ºæŒ‡å—

è¿™ä¸ªæ„å»ºç³»ç»Ÿå¯ä»¥å¸®æ‚¨è‡ªåŠ¨å‹ç¼©JavaScriptä»£ç ï¼Œé¿å…åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ‰‹åŠ¨å¤„ç†minificationï¼ŒèŠ‚çœtokenæ¶ˆè€—ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£… Node.js (å¦‚æœè¿˜æ²¡æœ‰å®‰è£…)
# ç„¶åå®‰è£…é¡¹ç›®ä¾èµ–
npm install
```

### 2. åŸºæœ¬ä½¿ç”¨

```bash
# ä¸€æ¬¡æ€§æ„å»ºæ‰€æœ‰æ–‡ä»¶
npm run build

# åªæ„å»º cheat.js
npm run build:cheat

# å¼€å‘æ¨¡å¼ - ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°æ„å»º
npm run dev

# æ¸…ç†ç”Ÿæˆçš„æ–‡ä»¶
npm run clean

# è¿è¡Œæµ‹è¯•ï¼ŒéªŒè¯æ„å»ºç»“æœ
npm test
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ cheat.js          # æºä»£ç  (æ‚¨ç¼–è¾‘è¿™ä¸ª)
â”‚   â””â”€â”€ cheat.min.js      # è‡ªåŠ¨ç”Ÿæˆçš„å‹ç¼©ç‰ˆæœ¬
â”œâ”€â”€ build.js              # æ„å»ºè„šæœ¬
â”œâ”€â”€ test-build.js         # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â””â”€â”€ BUILD_GUIDE.md        # æœ¬æ–‡æ¡£
```

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### æ¨èçš„å¼€å‘æµç¨‹ï¼š

1. **å¯åŠ¨å¼€å‘æ¨¡å¼**
   ```bash
   npm run dev
   ```

2. **ç¼–è¾‘æºä»£ç **
   - åªéœ€è¦ç¼–è¾‘ `data/cheat.js`
   - ä¿å­˜åä¼šè‡ªåŠ¨ç”Ÿæˆ `data/cheat.min.js`

3. **æµ‹è¯•åŠŸèƒ½**
   ```bash
   npm test
   ```

4. **æäº¤ä»£ç **
   - åªéœ€è¦æäº¤ `data/cheat.js`
   - `.min.js` æ–‡ä»¶ç”±æ„å»ºç³»ç»Ÿç”Ÿæˆ

## âš™ï¸ æ„å»ºé…ç½®

æ„å»ºé…ç½®åœ¨ `build.js` ä¸­çš„ `BUILD_CONFIG` å¯¹è±¡ï¼š

```javascript
const BUILD_CONFIG = {
    files: [
        {
            input: 'data/cheat.js',      // æºæ–‡ä»¶
            output: 'data/cheat.min.js', // è¾“å‡ºæ–‡ä»¶
            options: {
                compress: {
                    drop_console: false,  // ä¿ç•™console.log
                    keep_fnames: true    // ä¿ç•™å‡½æ•°å
                },
                mangle: {
                    keep_fnames: true,   // ä¿ç•™å‡½æ•°å
                    reserved: [...]      // ä¿ç•™çš„å˜é‡å
                }
            }
        }
    ]
};
```

## ğŸ¯ ä¼˜åŠ¿

### å¯¹å¼€å‘è€…ï¼š
- âœ… **ä¸“æ³¨æºä»£ç **ï¼šåªéœ€ç¼–è¾‘ `.js` æ–‡ä»¶
- âœ… **è‡ªåŠ¨åŒ–**ï¼šä¿å­˜å³å‹ç¼©ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- âœ… **å®æ—¶åé¦ˆ**ï¼šæ–‡ä»¶ç›‘å¬æ¨¡å¼ï¼Œç«‹å³çœ‹åˆ°ç»“æœ
- âœ… **è´¨é‡ä¿è¯**ï¼šå†…ç½®æµ‹è¯•ï¼Œç¡®ä¿å‹ç¼©åä»£ç æ­£å¸¸

### å¯¹AIåŠ©æ‰‹ï¼š
- âœ… **èŠ‚çœToken**ï¼šä¸å†éœ€è¦å¤„ç†å‹ç¼©æ–‡ä»¶
- âœ… **æé«˜æ•ˆç‡**ï¼šä¸“æ³¨äºåŠŸèƒ½å®ç°
- âœ… **å‡å°‘é”™è¯¯**ï¼šé¿å…æ‰‹åŠ¨å‹ç¼©çš„è¯­æ³•é”™è¯¯
- âœ… **ä¸€è‡´æ€§**ï¼šæ ‡å‡†åŒ–çš„æ„å»ºæµç¨‹

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1ï¼šæ·»åŠ æ–°åŠŸèƒ½
```bash
# 1. å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev

# 2. ç¼–è¾‘ data/cheat.jsï¼Œæ·»åŠ æ–°åŠŸèƒ½
# 3. ä¿å­˜æ–‡ä»¶ -> è‡ªåŠ¨ç”Ÿæˆ cheat.min.js
# 4. æµ‹è¯•åŠŸèƒ½
npm test
```

### åœºæ™¯2ï¼šä¿®å¤bug
```bash
# 1. ç¼–è¾‘ data/cheat.js ä¿®å¤é—®é¢˜
# 2. ä¸€æ¬¡æ€§æ„å»º
npm run build

# 3. éªŒè¯ä¿®å¤æ•ˆæœ
npm test
```

### åœºæ™¯3ï¼šå‘å¸ƒå‰æ£€æŸ¥
```bash
# æ¸…ç†æ—§æ–‡ä»¶
npm run clean

# é‡æ–°æ„å»º
npm run build

# è¿è¡Œå®Œæ•´æµ‹è¯•
npm test
```

## ğŸ” æ•…éšœæ’é™¤

### Q: æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ `data/cheat.js` çš„è¯­æ³•é”™è¯¯ï¼Œæ„å»ºè„šæœ¬ä¼šæ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚

### Q: å‹ç¼©ååŠŸèƒ½ä¸æ­£å¸¸ï¼Ÿ
A: å¯èƒ½æ˜¯å‡½æ•°åè¢«é”™è¯¯å‹ç¼©ï¼Œæ£€æŸ¥ `build.js` ä¸­çš„ `reserved` æ•°ç»„ã€‚

### Q: æ–‡ä»¶ç›‘å¬ä¸å·¥ä½œï¼Ÿ
A: ç¡®ä¿å®‰è£…äº† `chokidar` ä¾èµ–ï¼š`npm install chokidar`

### Q: æƒ³è¦ä¸åŒçš„å‹ç¼©é…ç½®ï¼Ÿ
A: ä¿®æ”¹ `build.js` ä¸­çš„ `BUILD_CONFIG.files[0].options`

## ğŸš€ é«˜çº§ç”¨æ³•

### æ·»åŠ æ›´å¤šæ–‡ä»¶åˆ°æ„å»ºæµç¨‹
åœ¨ `BUILD_CONFIG.files` æ•°ç»„ä¸­æ·»åŠ æ–°çš„é…ç½®å¯¹è±¡ï¼š

```javascript
{
    input: 'data/another-script.js',
    output: 'data/another-script.min.js',
    options: { /* è‡ªå®šä¹‰å‹ç¼©é€‰é¡¹ */ }
}
```

### è‡ªå®šä¹‰å‹ç¼©é€‰é¡¹
å‚è€ƒ [Terseræ–‡æ¡£](https://terser.org/docs/api-reference) äº†è§£æ‰€æœ‰å¯ç”¨é€‰é¡¹ã€‚

### é›†æˆåˆ°CI/CD
åœ¨éƒ¨ç½²è„šæœ¬ä¸­æ·»åŠ ï¼š
```bash
npm install
npm run build
npm test
```

---

ğŸ’¡ **æç¤º**ï¼šä½¿ç”¨è¿™ä¸ªæ„å»ºç³»ç»Ÿåï¼ŒAIåŠ©æ‰‹åªéœ€è¦å…³æ³¨æºä»£ç çš„åŠŸèƒ½å®ç°ï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼

