// 鐢辨瀯寤鸿剼鏈帇缂╃敓鎴?- 2025-08-29 01:49:53
varCHEAT_ENABLED=false;varCHEAT_LOG_PREFIX="🎮金手指:";varLOCKED_STATUS={};varWHITE_MODE_ENABLED=false;varORIGINAL_BAG_CAP=12;functioninitCheat(){console.log(CHEAT_LOG_PREFIX,"初始化中...");try{createCheatUI();addCheatStyles();setupCheatConsole();installStatusHook();installCraftingHook();CHEAT_ENABLED=true;console.log(CHEAT_LOG_PREFIX,"初始化完成✅");}catch(e){console.error(CHEAT_LOG_PREFIX,"初始化失败",e);}}functioninstallStatusHook(){try{if(typeofwindow.originalCaculate==='undefined'){window.originalCaculate=window.caculate;}window.caculate=function(data,name,value){if(data===PLAYER_STATUS&&LOCKED_STATUS[name]){console.log(CHEAT_LOG_PREFIX,`阻止属性${name}变化，保持锁定值`);return;}window.originalCaculate(data,name,value);};if(typeofwindow.lockStatusInterval==='undefined'){window.lockStatusInterval=setInterval(function(){for(varattrinLOCKED_STATUS){if(LOCKED_STATUS[attr]&&PLAYER_STATUS[attr]){varcurrentValue=PLAYER_STATUS[attr].value;vartargetValue;if(attr==='radiation'){targetValue=0;}else{targetValue=PLAYER_STATUS[attr].max||100;}if(currentValue!==targetValue){PLAYER_STATUS[attr].value=targetValue;updateStatus(attr);}}}},1000);}console.log(CHEAT_LOG_PREFIX,"状态钩子已安装，锁定功能已加强");}catch(e){console.error(CHEAT_LOG_PREFIX,"安装状态钩子失败",e);}}functioninstallCraftingHook(){try{if(typeofwindow.originalCostMaterialFunc==='undefined'){window.originalCostMaterialFunc=window.costMaterialFunc;}window.costMaterialFunc=function(cost,item,amount){if(WHITE_MODE_ENABLED){console.log(CHEAT_LOG_PREFIX,"白嫖模式:跳过材料扣除");if(TOOL_DATA[item].only){if(TOOL_DATA[item].upgrade!=undefined){eval(TOOL_DATA[item].upgrade);}if(TOOL_DATA[item].eternal==undefined){deleteTOOL_DATA[item].show;TOOL_FINISHED.push(item);}varnewObj=newworkbenchObj(mode);newObj.create();}return;}window.originalCostMaterialFunc(cost,item,amount);};console.log(CHEAT_LOG_PREFIX,"物品制作钩子已安装，白嫖模式可用");}catch(e){console.error(CHEAT_LOG_PREFIX,"安装物品制作钩子失败",e);}}functiontoggleWhiteMode(){WHITE_MODE_ENABLED=!WHITE_MODE_ENABLED;varstatus=WHITE_MODE_ENABLED?"开启":"关闭";console.log(CHEAT_LOG_PREFIX,"白嫖模式已"+status);showMsg("白嫖模式已"+status);$("#whiteModeBtn").text(WHITE_MODE_ENABLED?"关闭白嫖":"开启白嫖");installCraftingHook();}functionexpandInventory(){try{if(typeofORIGINAL_BAG_CAP==='undefined'||ORIGINAL_BAG_CAP===null){ORIGINAL_BAG_CAP=BAG_CAP;}BAG_CAP=999;console.log(CHEAT_LOG_PREFIX,"背包容量已扩容至999");showMsg("背包容量已扩容至999");}catch(e){console.error(CHEAT_LOG_PREFIX,"背包扩容失败",e);}}functionrestoreInventory(){try{if(ORIGINAL_BAG_CAP){BAG_CAP=ORIGINAL_BAG_CAP;console.log(CHEAT_LOG_PREFIX,"背包容量已恢复至"+ORIGINAL_BAG_CAP);showMsg("背包容量已恢复至"+ORIGINAL_BAG_CAP);}}catch(e){console.error(CHEAT_LOG_PREFIX,"恢复背包容量失败",e);}}functionremoveAllBuffs(){try{varremovedCount=0;for(varbuffinPLAYER_STATUS.buff){if(PLAYER_STATUS.buff.hasOwnProperty(buff)){removeBuff(buff);removedCount++;}}console.log(CHEAT_LOG_PREFIX,"已移除"+removedCount+"个状态");showMsg("已移除"+removedCount+"个状态");}catch(e){console.error(CHEAT_LOG_PREFIX,"移除状态失败",e);}}functionsetupCheatConsole(){try{window.cheat={};window.cheat.help=function(){console.log(CHEAT_LOG_PREFIX,"🎮金手指控制台命令🎮");console.log("---------------------------------------");console.log("基本命令：");console.log("cheat.status()-显示金手指状态");console.log("cheat.toggle()-开关金手指面板");console.log("cheat.listAttrs()-列出所有可修改的属性");console.log("---------------------------------------");console.log("属性修改命令：");console.log("cheat.set('属性名',值)-设置属性值");console.log("cheat.max('属性名')-将属性设为最大值");console.log("cheat.maxStatus()-最大化基础状态属性（生命、饱食、水分等）");console.log("cheat.maxSpecial()-最大化特殊属性（体质、感知、魅力等）");console.log("cheat.maxAll()-同时执行maxStatus和maxSpecial");console.log("---------------------------------------");console.log("属性锁定命令：");console.log("cheat.lock('属性名')-锁定/解锁指定属性，使其不随时间变化");console.log("cheat.lock('属性名',值)-设置属性值并锁定");console.log("cheat.lockStatus()-最大化并锁定所有基础状态属性");console.log("cheat.unlockAll()-解锁所有属性");console.log("---------------------------------------");console.log("物品操作命令：");console.log("cheat.whiteMode()-切换白嫖模式（制作物品不消耗材料）");console.log("cheat.expandBag()-将背包容量扩容至999");console.log("cheat.restoreBag()-恢复原始背包容量");console.log("---------------------------------------");console.log("状态操作命令：");console.log("cheat.removeAllBuffs()-移除当前所有附加状态");console.log("---------------------------------------");console.log("使用示例：");console.log("cheat.set('life',100)-将生命值设为100");console.log("cheat.lock('hunger',100)-将饱食度设为100并锁定");console.log("cheat.whiteMode()-开启/关闭白嫖模式");console.log("cheat.expandBag()-扩容背包至999");console.log("cheat.removeAllBuffs()-清除所有状态");console.log("---------------------------------------");console.log("UI界面功能：");console.log("-属性后的🔓/🔒按钮可以锁定/解锁该属性");console.log("-锁定后的属性不会随时间变化");console.log("-锁定的属性在listAttrs()中会显示🔒标记");console.log("-白嫖模式按钮可以直接在UI中开启/关闭");console.log("-背包扩容按钮可以立即扩容背包");console.log("-状态操作可以清除所有负面状态");console.log("---------------------------------------");console.log("快捷键：");console.log("Alt+X-切换金手指面板");console.log("---------------------------------------");console.log("注意事项：");console.log("1.属性名必须用引号括起来，例如'life'");console.log("2.锁定功能通过拦截游戏内属性变化实现");console.log("3.白嫖模式会跳过材料扣除，直接获得物品");console.log("4.背包扩容会修改BAG_CAP变量，可能影响游戏平衡");console.log("5.移除状态功能会清除所有buff，包括有益状态");console.log("6.如果金手指面板不显示，可以使用快捷键或刷新页面");console.log("金手指控制台已加载🎮");};window.cheat.status=function(){console.log(CHEAT_LOG_PREFIX,"状态:",CHEAT_ENABLED?"已启用✅":"未启用❌");console.log(CHEAT_LOG_PREFIX,"面板:",$("#cheatPanel").is(":visible")?"显示中👁️":"已隐藏🙈");console.log(CHEAT_LOG_PREFIX,"白嫖模式:",WHITE_MODE_ENABLED?"已开启🎁":"已关闭🚫");console.log(CHEAT_LOG_PREFIX,"背包容量:",BAG_CAP);};window.cheat.toggle=function(){if($("#cheatPanel").length===0){console.log(CHEAT_LOG_PREFIX,"面板不存在，重新创建...");createCheatUI();}varisVisible=$("#cheatPanel").is(":visible");if(isVisible){$("#cheatPanel").fadeOut(300);console.log(CHEAT_LOG_PREFIX,"面板已隐藏🙈");}else{$("#cheatPanel").css("z-index","9999999");if($("#cheatPanel").parent().prop("tagName")!=="BODY"){$("body").append($("#cheatPanel"));}$("#cheatPanel").fadeIn(300);updateAllAttributeValues();console.log(CHEAT_LOG_PREFIX,"面板已显示👁️");}};window.cheat.set=function(attr,value){if(typeofattr!=='string'){console.error(CHEAT_LOG_PREFIX,"属性名必须是字符串，例如:cheat.set('life',100)");console.log(CHEAT_LOG_PREFIX,"可用属性列表:");window.cheat.listAttrs();return;}if(!PLAYER_STATUS[attr]){console.error(CHEAT_LOG_PREFIX,`属性'${attr}'不存在`);console.log(CHEAT_LOG_PREFIX,"可用属性列表:");window.cheat.listAttrs();return;}if(isNaN(value)){console.error(CHEAT_LOG_PREFIX,"属性值必须是数字");return;}varoldValue=PLAYER_STATUS[attr].value;modifyAttribute(attr,value);console.log(CHEAT_LOG_PREFIX,`已修改${PLAYER_STATUS[attr].name}:${oldValue}→${value}`);};window.cheat.max=function(attr){if(typeofattr!=='string'){console.error(CHEAT_LOG_PREFIX,"属性名必须是字符串，例如:cheat.max('life')");console.log(CHEAT_LOG_PREFIX,"可用属性列表:");window.cheat.listAttrs();return;}if(!PLAYER_STATUS[attr]){console.error(CHEAT_LOG_PREFIX,`属性'${attr}'不存在`);console.log(CHEAT_LOG_PREFIX,"可用属性列表:");window.cheat.listAttrs();return;}if(attr==='radiation'){console.warn(CHEAT_LOG_PREFIX,"警告：最大化辐射可能导致角色死亡！");}varmax=PLAYER_STATUS[attr].max||999;varoldValue=PLAYER_STATUS[attr].value;modifyAttribute(attr,max);console.log(CHEAT_LOG_PREFIX,`已最大化${PLAYER_STATUS[attr].name}:${oldValue}→${max}`);};window.cheat.maxStatus=function(){console.log(CHEAT_LOG_PREFIX,"正在最大化基础状态属性...");varstatusToMax=['life','hunger','thirst','energy','san'];for(variinstatusToMax){varstatus=statusToMax[i];if(PLAYER_STATUS[status]){varmax=PLAYER_STATUS[status].max||100;modifyAttribute(status,max);}}if(PLAYER_STATUS['radiation']){modifyAttribute('radiation',0);}console.log(CHEAT_LOG_PREFIX,"基础状态属性已最大化✅");};window.cheat.maxSpecial=function(){console.log(CHEAT_LOG_PREFIX,"正在最大化特殊属性...");for(variinSPECIAL_LIST){varspecial=SPECIAL_LIST[i];varmax=PLAYER_STATUS[special].max||999;modifyAttribute(special,max);}console.log(CHEAT_LOG_PREFIX,"特殊属性已最大化✅");};window.cheat.maxAll=function(){console.log(CHEAT_LOG_PREFIX,"正在最大化所有属性...");window.cheat.maxStatus();window.cheat.maxSpecial();console.log(CHEAT_LOG_PREFIX,"所有属性已最大化✅");};window.cheat.listAttrs=function(){console.log(CHEAT_LOG_PREFIX,"基础属性:");for(variinSTATUS_LIST){varstatus=STATUS_LIST[i];varlockStatus=LOCKED_STATUS[status]?"🔒":"";console.log(`${status}:${PLAYER_STATUS[status].name}=${PLAYER_STATUS[status].value}${lockStatus}`);}console.log(CHEAT_LOG_PREFIX,"特殊属性:");for(variinSPECIAL_LIST){varspecial=SPECIAL_LIST[i];varlockStatus=LOCKED_STATUS[special]?"🔒":"";console.log(`${special}:${PLAYER_STATUS[special].name}=${PLAYER_STATUS[special].value}${lockStatus}`);}};window.cheat.lock=function(attr,value){if(typeofattr!=='string'){console.error(CHEAT_LOG_PREFIX,"属性名必须是字符串，例如:cheat.lock('life')");console.log(CHEAT_LOG_PREFIX,"可用属性列表:");window.cheat.listAttrs();return;}if(!PLAYER_STATUS[attr]){console.error(CHEAT_LOG_PREFIX,`属性'${attr}'不存在`);console.log(CHEAT_LOG_PREFIX,"可用属性列表:");window.cheat.listAttrs();return;}if(LOCKED_STATUS[attr]){deleteLOCKED_STATUS[attr];console.log(CHEAT_LOG_PREFIX,`已解锁${PLAYER_STATUS[attr].name}属性，恢复正常变化`);return;}if(value!==undefined){modifyAttribute(attr,value);}LOCKED_STATUS[attr]=true;console.log(CHEAT_LOG_PREFIX,`已锁定${PLAYER_STATUS[attr].name}属性，当前值:${PLAYER_STATUS[attr].value}`);};window.cheat.lockStatus=function(){console.log(CHEAT_LOG_PREFIX,"正在锁定所有基础状态属性...");window.cheat.maxStatus();varstatusToLock=['life','hunger','thirst','energy','san','radiation'];for(variinstatusToLock){varstatus=statusToLock[i];if(PLAYER_STATUS[status]){LOCKED_STATUS[status]=true;}}console.log(CHEAT_LOG_PREFIX,"所有基础状态属性已锁定🔒");};window.cheat.unlockAll=function(){console.log(CHEAT_LOG_PREFIX,"正在解锁所有属性...");LOCKED_STATUS={};if(typeofwindow.lockStatusInterval!=='undefined'){clearInterval(window.lockStatusInterval);window.lockStatusInterval=undefined;console.log(CHEAT_LOG_PREFIX,"已清除锁定状态监控定时器");}if(typeofwindow.originalCaculate!=='undefined'){window.caculate=window.originalCaculate;console.log(CHEAT_LOG_PREFIX,"已恢复原始状态计算函数");}setTimeout(function(){installStatusHook();},100);updateLockButtonStatus();console.log(CHEAT_LOG_PREFIX,"所有属性已解锁✅");};window.cheat.whiteMode=function(){toggleWhiteMode();};window.cheat.expandBag=function(){expandInventory();};window.cheat.restoreBag=function(){restoreInventory();};window.cheat.removeAllBuffs=function(){removeAllBuffs();};console.log(CHEAT_LOG_PREFIX,"金手指控制台已加载");console.log(CHEAT_LOG_PREFIX,"输入cheat.help()查看可用命令");}catch(e){console.error(CHEAT_LOG_PREFIX,"控制台设置失败",e);}}functioncreateCheatUI(){try{$("#cheatEmojiBtn").remove();$("#cheatPanel").remove();varemojiBtn=newElement("div","cheatEmojiBtn","","cheatEmojiBtn","🎮");$("body").append(emojiBtn);varcheatPanel=newElement("div","cheatPanel","","cheatPanel","");$("body").append(cheatPanel);$(cheatPanel).hide();varstatusIndicator=newElement("div","cheatStatus","","cheatStatus","");$("#cheatPanel").append(statusIndicator);updateCheatStatus();createAttributeSection();createPlaceholderSections();$("#cheatEmojiBtn").click(toggleCheatPanel);$("#cheatEmojiBtn").css("z-index","9999999");$("#cheatPanel").css("z-index","9999999");console.log(CHEAT_LOG_PREFIX,"UI创建完成，已附加到body最上层");}catch(e){console.error(CHEAT_LOG_PREFIX,"UI创建失败",e);}}functionupdateCheatStatus(){varstatusText="金手指状态:"+(CHEAT_ENABLED?"已启用✅":"未启用❌");$("#cheatStatus").html(statusText);console.log(CHEAT_LOG_PREFIX,statusText);}functiontoggleCheatPanel(){try{if($("#cheatEmojiBtn").length===0){console.log(CHEAT_LOG_PREFIX,"金手指按钮不存在，重新初始化...");createCheatUI();}if(typeofwindow.cheat!=='undefined'&&typeofwindow.cheat.toggle==='function'){window.cheat.toggle();}else{if($("#cheatPanel").length===0){console.log(CHEAT_LOG_PREFIX,"面板不存在，重新创建...");createCheatUI();}varisVisible=$("#cheatPanel").is(":visible");if(isVisible){$("#cheatPanel").fadeOut(300);console.log(CHEAT_LOG_PREFIX,"面板已隐藏🙈");}else{$("#cheatPanel").css("z-index","9999999");if($("#cheatPanel").parent().prop("tagName")!=="BODY"){$("body").append($("#cheatPanel"));}$("#cheatPanel").fadeIn(300);updateAllAttributeValues();console.log(CHEAT_LOG_PREFIX,"面板已显示👁️");}}}catch(e){console.error(CHEAT_LOG_PREFIX,"切换面板失败",e);}}functionupdateAllAttributeValues(){try{for(variinSTATUS_LIST){varstatus=STATUS_LIST[i];if(PLAYER_STATUS[status]&&PLAYER_STATUS[status].value!==undefined){$("#attr_"+status).val(Math.floor(PLAYER_STATUS[status].value));}}for(variinSPECIAL_LIST){varspecial=SPECIAL_LIST[i];if(PLAYER_STATUS[special]&&PLAYER_STATUS[special].value!==undefined){$("#attr_"+special).val(Math.floor(PLAYER_STATUS[special].value));}}updateLockButtonStatus();}catch(e){console.error(CHEAT_LOG_PREFIX,"更新属性值失败",e);}}functionupdateLockButtonStatus(){try{varstatusToCheck=['life','hunger','thirst','energy','san','radiation'];for(variinstatusToCheck){varstatus=statusToCheck[i];varlockBtn=$("#lock_"+status);if(lockBtn.length>0){if(LOCKED_STATUS[status]){$(lockBtn).text("🔒");$(lockBtn).addClass("locked");}else{$(lockBtn).text("🔓");$(lockBtn).removeClass("locked");}}}}catch(e){console.error(CHEAT_LOG_PREFIX,"更新锁定按钮状态失败",e);}}functioncreateAttributeSection(){try{varsection=newElement("div","","cheatSection","cheatSection","<h3>属性修改</h3>");varbasicSection=newElement("div","","","cheatSubSection","");varbasicHeader=newElement("div","","","cheatSectionHeader","");$(basicHeader).html("<h4style='display:inline-block;margin-right:10px;'>基础属性</h4>");varmaxStatusBtn=newElement("button","","","btnbtn-primarybtn-sm","最大化状态");$(maxStatusBtn).click(function(){window.cheat.maxStatus();updateAllAttributeValues();});$(basicHeader).append(maxStatusBtn);varlockStatusBtn=newElement("button","","","btnbtn-warningbtn-sm","锁定状态");$(lockStatusBtn).click(function(){window.cheat.lockStatus();updateAllAttributeValues();updateLockButtonStatus();});$(basicHeader).append(lockStatusBtn);varunlockAllBtn=newElement("button","","","btnbtn-dangerbtn-sm","解锁全部");$(unlockAllBtn).click(function(){window.cheat.unlockAll();updateAllAttributeValues();updateLockButtonStatus();});$(basicHeader).append(unlockAllBtn);$(basicSection).append(basicHeader);for(variinSTATUS_LIST){varstatus=STATUS_LIST[i];varrow=createAttributeRow(status,PLAYER_STATUS[status].name);$(basicSection).append(row);}$(section).append(basicSection);varspecialSection=newElement("div","","","cheatSubSection","");varspecialHeader=newElement("div","","","cheatSectionHeader","");$(specialHeader).html("<h4style='display:inline-block;margin-right:10px;'>特殊属性</h4>");varmaxSpecialBtn=newElement("button","","","btnbtn-successbtn-sm","最大化特殊属性");$(maxSpecialBtn).click(function(){window.cheat.maxSpecial();updateAllAttributeValues();});$(specialHeader).append(maxSpecialBtn);$(specialSection).append(specialHeader);for(variinSPECIAL_LIST){varspecial=SPECIAL_LIST[i];varrow=createAttributeRow(special,PLAYER_STATUS[special].name);$(specialSection).append(row);}$(section).append(specialSection);$("#cheatPanel").append(section);}catch(e){console.error(CHEAT_LOG_PREFIX,"创建属性区域失败",e);}}functioncreateAttributeRow(attr,name){try{varrow=newElement("div","","","cheatAttributeRow","");varlabel=newElement("label","","","",name);$(row).append(label);varinput=newElement("input","attr_"+attr,"","","");$(input).attr("type","number");$(input).attr("min","0");if(PLAYER_STATUS[attr]&&PLAYER_STATUS[attr].value!==undefined){$(input).val(Math.floor(PLAYER_STATUS[attr].value));}$(input).change(function(){varvalue=parseInt($(this).val());modifyAttribute(attr,value);});$(row).append(input);varisBasicStatus=$.inArray(attr,['life','hunger','thirst','energy','san','radiation'])!==-1;if(isBasicStatus){varmaxBtn=newElement("button","","","btnbtn-xsbtn-default","最大");$(maxBtn).click(function(){varmax=PLAYER_STATUS[attr].max||100;if(attr==='radiation'){max=0;}$("#attr_"+attr).val(max);modifyAttribute(attr,max);});$(row).append(maxBtn);varlockBtn=newElement("button","lock_"+attr,"","btnbtn-xsbtn-defaultlockBtn","🔓");if(LOCKED_STATUS[attr]){$(lockBtn).text("🔒");$(lockBtn).addClass("locked");}$(lockBtn).click(function(){if(LOCKED_STATUS[attr]){deleteLOCKED_STATUS[attr];$(this).text("🔓");$(this).removeClass("locked");console.log(CHEAT_LOG_PREFIX,`已解锁${PLAYER_STATUS[attr].name}属性`);}else{LOCKED_STATUS[attr]=true;$(this).text("🔒");$(this).addClass("locked");console.log(CHEAT_LOG_PREFIX,`已锁定${PLAYER_STATUS[attr].name}属性`);}});$(row).append(lockBtn);}else{varplus10Btn=newElement("button","","","btnbtn-xsbtn-info","+10");$(plus10Btn).click(function(){varcurrentValue=parseInt($("#attr_"+attr).val())||0;varnewValue=currentValue+10;$("#attr_"+attr).val(newValue);modifyAttribute(attr,newValue);});$(row).append(plus10Btn);varmaxBtn=newElement("button","","","btnbtn-xsbtn-default","最大");$(maxBtn).click(function(){varmax=PLAYER_STATUS[attr].max||999;$("#attr_"+attr).val(max);modifyAttribute(attr,max);});$(row).append(maxBtn);}returnrow;}catch(e){console.error(CHEAT_LOG_PREFIX,"创建属性行失败",e);returndocument.createElement("div");}}functioncreatePlaceholderSections(){try{varitemSection=newElement("div","","cheatSection","cheatSection","<h3>物品操作</h3>");varitemControls=newElement("div","","","itemControls","");varwhiteModeBtn=newElement("button","whiteModeBtn","","btnbtn-primarycheatBtn",WHITE_MODE_ENABLED?"关闭白嫖":"开启白嫖");$(whiteModeBtn).click(function(){toggleWhiteMode();});$(itemControls).append(whiteModeBtn);varexpandBagBtn=newElement("button","","","btnbtn-successcheatBtn","背包扩容至999");$(expandBagBtn).click(function(){expandInventory();$(this).text("已扩容("+BAG_CAP+")");$(this).prop("disabled",true);setTimeout(function(){$(expandBagBtn).text("恢复原始容量");$(expandBagBtn).prop("disabled",false);$(expandBagBtn).removeClass("btn-success").addClass("btn-warning");$(expandBagBtn).unbind("click").click(function(){restoreInventory();$(expandBagBtn).text("背包扩容至999");$(expandBagBtn).removeClass("btn-warning").addClass("btn-success");});},1000);});$(itemControls).append(expandBagBtn);$(itemSection).append(itemControls);$("#cheatPanel").append(itemSection);varstatusSection=newElement("div","","cheatSection","cheatSection","<h3>状态操作</h3>");varstatusControls=newElement("div","","","statusControls","");varremoveBuffsBtn=newElement("button","","","btnbtn-dangercheatBtn","移除所有状态");$(removeBuffsBtn).click(function(){removeAllBuffs();$(this).text("已清除状态");setTimeout(function(){$(removeBuffsBtn).text("移除所有状态");},2000);});$(statusControls).append(removeBuffsBtn);$(statusSection).append(statusControls);$("#cheatPanel").append(statusSection);varmapSection=newElement("div","","cheatSection","cheatSection","<h3>地图功能</h3><pclass='comingSoon'>功能开发中...</p>");$("#cheatPanel").append(mapSection);varbattleSection=newElement("div","","cheatSection","cheatSection","<h3>战斗辅助</h3><pclass='comingSoon'>功能开发中...</p>");$("#cheatPanel").append(battleSection);varconsoleSection=newElement("div","","cheatSection","cheatSection","<h3>控制台命令</h3>");varconsoleHelp=newElement("div","","","cheatConsoleHelp","");$(consoleHelp).html(`<p>在浏览器控制台(F12)中可使用以下命令:</p><ul><li><code>cheat.help()</code>-显示所有命令</li><li><code>cheat.status()</code>-显示金手指状态</li><li><code>cheat.whiteMode()</code>-切换白嫖模式</li><li><code>cheat.expandBag()</code>-扩容背包</li><li><code>cheat.removeAllBuffs()</code>-清除状态</li></ul>`);$(consoleSection).append(consoleHelp);$("#cheatPanel").append(consoleSection);}catch(e){console.error(CHEAT_LOG_PREFIX,"创建占位区域失败",e);}}functionmodifyAttribute(attr,value){try{if(PLAYER_STATUS[attr]!==undefined){if(PLAYER_STATUS[attr].value!==undefined){varoldValue=PLAYER_STATUS[attr].value;PLAYER_STATUS[attr].value=value;updateStatus(attr);console.log(CHEAT_LOG_PREFIX,`已修改${PLAYER_STATUS[attr].name}:${oldValue}→${value}`);showMsg("已修改"+PLAYER_STATUS[attr].name+"为"+value);}}}catch(e){console.error(CHEAT_LOG_PREFIX,"修改属性失败",e);}}functionaddCheatStyles(){try{varstyle=document.createElement('style');style.type='text/css';style.innerHTML=`#cheatEmojiBtn{position:fixed;right:10px;top:10px;font-size:24px;background-color:rgba(0,0,0,0.5);color:#fff;width:40px;height:40px;line-height:40px;text-align:center;border-radius:50%;cursor:pointer;z-index:9999999;opacity:0.7;transition:all0.3sease;}#cheatEmojiBtn:hover{opacity:1;transform:scale(1.1);background-color:rgba(255,50,50,0.7);}.cheatPanel{position:fixed;top:60px;right:10px;width:300px;max-height:80vh;overflow-y:auto;background-color:rgba(0,0,0,0.85);border:1pxsolid#666;border-radius:5px;padding:10px;z-index:9999999;color:#fff;box-shadow:0010pxrgba(0,0,0,0.5);}.cheatStatus{background-color:rgba(0,0,0,0.5);padding:5px;margin-bottom:10px;border-radius:3px;text-align:center;font-weight:bold;color:#ffcc00;}.cheatSection{margin-bottom:15px;padding-bottom:10px;border-bottom:1pxsolid#555;}.cheatSectionh3{color:#ff9900;font-size:16px;margin-top:5px;margin-bottom:10px;}.cheatSectionh4{color:#ffcc00;font-size:14px;margin-top:10px;margin-bottom:5px;}.cheatSectionHeader{display:flex;align-items:center;margin-bottom:8px;padding-bottom:5px;border-bottom:1pxsolidrgba(255,255,255,0.2);}.cheatSectionHeaderbutton{margin-left:5px;padding:2px5px;font-size:11px;}.cheatQuickButtons{display:flex;justify-content:center;margin-bottom:10px;}.cheatQuickButtonsbutton{margin:05px;}.cheatSubSection{margin-bottom:15px;padding:8px;background-color:rgba(255,255,255,0.05);border-radius:3px;border-left:3pxsolidrgba(255,204,0,0.5);}.cheatSectionbutton{margin:2px;font-size:12px;}.cheatAttributeRow{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;}.cheatAttributeRowlabel{flex:1;}.cheatAttributeRowinput{width:60px;background-color:#333;color:#fff;border:1pxsolid#555;padding:2px5px;margin-right:5px;}.lockBtn{width:30px;margin-left:2px!important;}.lockBtn.locked{background-color:#ff9900;color:#000;}.comingSoon{color:#999;font-style:italic;text-align:center;padding:10px;}.cheatBtn{margin:3px2px!important;padding:6px10px!important;font-size:12px!important;border-radius:3px!important;min-width:80px!important;}.itemControls,.statusControls{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin-top:10px;}.itemControlsbutton,.statusControlsbutton{flex:1;min-width:120px;max-width:140px;}.cheatConsoleHelp{background-color:rgba(0,0,0,0.3);padding:10px;border-radius:3px;font-size:12px;}.cheatConsoleHelpcode{background-color:#333;padding:2px4px;border-radius:3px;color:#ffcc00;}`;document.head.appendChild(style);console.log(CHEAT_LOG_PREFIX,"样式添加完成");}catch(e){console.error(CHEAT_LOG_PREFIX,"添加样式失败",e);}}$(document).ready(function(){console.log(CHEAT_LOG_PREFIX,"等待游戏加载...");varcheckInterval=setInterval(function(){if(typeofPLAYER_STATUS!=="undefined"&&typeofSTATUS_LIST!=="undefined"){console.log(CHEAT_LOG_PREFIX,"游戏已加载，初始化金手指...");initCheat();clearInterval(checkInterval);}},1000);$(document).on('click','#startBtn',function(){console.log(CHEAT_LOG_PREFIX,"检测到游戏开始，确保金手指可用...");if($("#cheatPanel").is(":visible")){$("#cheatPanel").hide();}});$(document).on('click','.modal-footer.btn-primary,.modal-footer.btn-success',function(){console.log(CHEAT_LOG_PREFIX,"检测到确认按钮点击，准备重新初始化金手指...");setTimeout(function(){console.log(CHEAT_LOG_PREFIX,"游戏界面已加载，重新初始化金手指...");$("#cheatEmojiBtn").remove();$("#cheatPanel").remove();initCheat();$("#cheatPanel").hide();$("body").append($("#cheatEmojiBtn"));$("body").append($("#cheatPanel"));console.log(CHEAT_LOG_PREFIX,"金手指已重新初始化并移至顶层");},2000);});varobserveDOM=(function(){varMutationObserver=window.MutationObserver||window.WebKitMutationObserver;returnfunction(obj,callback){if(!obj||obj.nodeType!==1)return;if(MutationObserver){varmutationObserver=newMutationObserver(callback);mutationObserver.observe(obj,{childList:true,subtree:true});returnmutationObserver;}elseif(window.addEventListener){obj.addEventListener('DOMNodeInserted',callback,false);obj.addEventListener('DOMNodeRemoved',callback,false);}};})();observeDOM(document.body,function(mutations){if($("#cheatEmojiBtn").length===0&&typeofPLAYER_STATUS!=="undefined"){console.log(CHEAT_LOG_PREFIX,"检测到DOM变化，金手指按钮丢失，重新初始化...");initCheat();$("body").append($("#cheatEmojiBtn"));$("body").append($("#cheatPanel"));}});$(document).keydown(function(e){if(e.altKey&&e.which===88){e.preventDefault();console.log(CHEAT_LOG_PREFIX,"检测到快捷键Alt+X，切换金手指面板");if($("#cheatEmojiBtn").length===0){console.log(CHEAT_LOG_PREFIX,"金手指按钮不存在，重新初始化...");initCheat();$("body").append($("#cheatEmojiBtn"));$("body").append($("#cheatPanel"));}if(typeofwindow.cheat!=="undefined"){window.cheat.toggle();}elseif(CHEAT_ENABLED){toggleCheatPanel();}else{console.log(CHEAT_LOG_PREFIX,"金手指未初始化，尝试初始化...");initCheat();setTimeout(function(){toggleCheatPanel();},500);}}});});