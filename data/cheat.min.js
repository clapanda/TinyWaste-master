var CHEAT_ENABLED=!1,CHEAT_LOG_PREFIX="🎮 金手指:",LOCKED_STATUS={};function initCheat(){console.log(CHEAT_LOG_PREFIX,"初始化中...");try{createCheatUI(),addCheatStyles(),setupCheatConsole(),installStatusHook(),CHEAT_ENABLED=!0,console.log(CHEAT_LOG_PREFIX,"初始化完成 ✅")}catch(a){console.error(CHEAT_LOG_PREFIX,"初始化失败",a)}}function installStatusHook(){try{typeof window.originalCaculate=="undefined"&&(window.originalCaculate=window.caculate),window.caculate=function(a,b,c){a!==PLAYER_STATUS||LOCKED_STATUS[b]||window.originalCaculate(a,b,c)},console.log(CHEAT_LOG_PREFIX,"状态钩子已安装，可以锁定属性值")}catch(a){console.error(CHEAT_LOG_PREFIX,"安装状态钩子失败",a)}}function setupCheatConsole(){try{window.cheat={},window.cheat.help=function(){console.log(CHEAT_LOG_PREFIX,"🎮 金手指控制台命令 🎮"),console.log("---------------------------------------"),console.log("基本命令："),console.log("  cheat.status()             - 显示金手指状态"),console.log("  cheat.toggle()             - 开关金手指面板"),console.log("  cheat.listAttrs()          - 列出所有可修改的属性"),console.log("---------------------------------------"),console.log("属性修改命令："),console.log("  cheat.set('属性名', 值)     - 设置属性值"),console.log("  cheat.max('属性名')         - 将属性设为最大值"),console.log("  cheat.maxStatus()          - 最大化基础状态属性（生命、饱食、水分等）"),console.log("  cheat.maxSpecial()         - 最大化特殊属性（体质、感知、魅力等）"),console.log("  cheat.maxAll()             - 同时执行maxStatus和maxSpecial"),console.log("---------------------------------------"),console.log("属性锁定命令："),console.log("  cheat.lock('属性名')        - 锁定/解锁指定属性，使其不随时间变化"),console.log("  cheat.lock('属性名', 值)    - 设置属性值并锁定"),console.log("  cheat.lockStatus()         - 最大化并锁定所有基础状态属性"),console.log("  cheat.unlockAll()          - 解锁所有属性"),console.log("---------------------------------------"),console.log("使用示例："),console.log("  cheat.set('life', 100)     - 将生命值设为100"),console.log("  cheat.lock('hunger', 100)  - 将饱食度设为100并锁定"),console.log("  cheat.lock('radiation', 0) - 将辐射设为0并锁定"),console.log("  cheat.maxStatus()          - 最大化所有基础状态属性"),console.log("---------------------------------------"),console.log("UI界面功能："),console.log("  - 属性后的🔓/🔒按钮可以锁定/解锁该属性"),console.log("  - 锁定后的属性不会随时间变化"),console.log("  - 锁定的属性在listAttrs()中会显示🔒标记"),console.log("---------------------------------------"),console.log("快捷键："),console.log("  Ctrl+Shift+C               - 切换金手指面板"),console.log("---------------------------------------"),console.log("注意事项："),console.log("  1. 属性名必须用引号括起来，例如 'life'"),console.log("  2. 锁定功能通过拦截游戏内属性变化实现"),console.log("  3. 如果金手指面板不显示，可以使用快捷键或刷新页面"),console.log("金手指控制台已加载 🎮")},window.cheat.status=function(){console.log(CHEAT_LOG_PREFIX,"状态:",CHEAT_ENABLED?"已启用 ✅":"未启用 ❌"),console.log(CHEAT_LOG_PREFIX,"面板:",$("#cheatPanel").is(":visible")?"显示中 👁️":"已隐藏 🙈")},window.cheat.toggle=function(){var a=$("#cheatPanel").is(":visible");a?($("#cheatPanel").fadeOut(300),console.log(CHEAT_LOG_PREFIX,"面板已隐藏 🙈")):($("#cheatPanel").fadeIn(300),updateAllAttributeValues(),console.log(CHEAT_LOG_PREFIX,"面板已显示 👁️"))},window.cheat.set=function(a,b){if("string"!=typeof a)return console.error(CHEAT_LOG_PREFIX,"属性名必须是字符串，例如: cheat.set('life', 100)"),console.log(CHEAT_LOG_PREFIX,"可用属性列表:"),void window.cheat.listAttrs();if(!PLAYER_STATUS[a])return console.error(CHEAT_LOG_PREFIX,`属性 '${a}' 不存在`),console.log(CHEAT_LOG_PREFIX,"可用属性列表:"),void window.cheat.listAttrs();if(isNaN(b))return void console.error(CHEAT_LOG_PREFIX,"属性值必须是数字");var c=PLAYER_STATUS[a].value;modifyAttribute(a,b),console.log(CHEAT_LOG_PREFIX,`已修改 ${PLAYER_STATUS[a].name}: ${c} → ${b}`)},window.cheat.max=function(a){if("string"!=typeof a)return console.error(CHEAT_LOG_PREFIX,"属性名必须是字符串，例如: cheat.max('life')"),console.log(CHEAT_LOG_PREFIX,"可用属性列表:"),void window.cheat.listAttrs();if(!PLAYER_STATUS[a])return console.error(CHEAT_LOG_PREFIX,`属性 '${a}' 不存在`),console.log(CHEAT_LOG_PREFIX,"可用属性列表:"),void window.cheat.listAttrs();"radiation"===a&&console.warn(CHEAT_LOG_PREFIX,"警告：最大化辐射可能导致角色死亡！");var b=PLAYER_STATUS[a].max||999,c=PLAYER_STATUS[a].value;modifyAttribute(a,b),console.log(CHEAT_LOG_PREFIX,`已最大化 ${PLAYER_STATUS[a].name}: ${c} → ${b}`)},window.cheat.maxStatus=function(){console.log(CHEAT_LOG_PREFIX,"正在最大化基础状态属性...");for(var a in["life","hunger","thirst","energy","san"]){var b=["life","hunger","thirst","energy","san"][a];if(PLAYER_STATUS[b]){var c=PLAYER_STATUS[b].max||100;modifyAttribute(b,c)}}PLAYER_STATUS.radiation&&modifyAttribute("radiation",0),console.log(CHEAT_LOG_PREFIX,"基础状态属性已最大化 ✅")},window.cheat.maxSpecial=function(){console.log(CHEAT_LOG_PREFIX,"正在最大化特殊属性...");for(var a in SPECIAL_LIST){var b=SPECIAL_LIST[a],c=PLAYER_STATUS[b].max||999;modifyAttribute(b,c)}console.log(CHEAT_LOG_PREFIX,"特殊属性已最大化 ✅")},window.cheat.maxAll=function(){console.log(CHEAT_LOG_PREFIX,"正在最大化所有属性..."),window.cheat.maxStatus(),window.cheat.maxSpecial(),console.log(CHEAT_LOG_PREFIX,"所有属性已最大化 ✅")},window.cheat.listAttrs=function(){console.log(CHEAT_LOG_PREFIX,"基础属性:");for(var a in STATUS_LIST){var b=STATUS_LIST[a],c=LOCKED_STATUS[b]?"🔒":"";console.log(`  ${b}: ${PLAYER_STATUS[b].name} = ${PLAYER_STATUS[b].value} ${c}`)}console.log(CHEAT_LOG_PREFIX,"特殊属性:");for(var a in SPECIAL_LIST){var d=SPECIAL_LIST[a],c=LOCKED_STATUS[d]?"🔒":"";console.log(`  ${d}: ${PLAYER_STATUS[d].name} = ${PLAYER_STATUS[d].value} ${c}`)}},window.cheat.lock=function(a,b){if("string"!=typeof a)return console.error(CHEAT_LOG_PREFIX,"属性名必须是字符串，例如: cheat.lock('life')"),console.log(CHEAT_LOG_PREFIX,"可用属性列表:"),void window.cheat.listAttrs();if(!PLAYER_STATUS[a])return console.error(CHEAT_LOG_PREFIX,`属性 '${a}' 不存在`),console.log(CHEAT_LOG_PREFIX,"可用属性列表:"),void window.cheat.listAttrs();if(LOCKED_STATUS[a])return delete LOCKED_STATUS[a],void console.log(CHEAT_LOG_PREFIX,`已解锁 ${PLAYER_STATUS[a].name} 属性，恢复正常变化`);void 0!==b&&modifyAttribute(a,b),LOCKED_STATUS[a]=!0,console.log(CHEAT_LOG_PREFIX,`已锁定 ${PLAYER_STATUS[a].name} 属性，当前值: ${PLAYER_STATUS[a].value}`)},window.cheat.lockStatus=function(){console.log(CHEAT_LOG_PREFIX,"正在锁定所有基础状态属性..."),window.cheat.maxStatus();for(var a in["life","hunger","thirst","energy","san","radiation"]){var b=["life","hunger","thirst","energy","san","radiation"][a];PLAYER_STATUS[b]&&(LOCKED_STATUS[b]=!0)}console.log(CHEAT_LOG_PREFIX,"所有基础状态属性已锁定 🔒")},window.cheat.unlockAll=function(){console.log(CHEAT_LOG_PREFIX,"正在解锁所有属性..."),LOCKED_STATUS={},console.log(CHEAT_LOG_PREFIX,"所有属性已解锁 ✅")},console.log(CHEAT_LOG_PREFIX,"金手指控制台已加载"),console.log(CHEAT_LOG_PREFIX,"输入 cheat.help() 查看可用命令")}catch(a){console.error(CHEAT_LOG_PREFIX,"控制台设置失败",a)}}function createCheatUI(){try{var a=newElement("div","cheatEmojiBtn","","cheatEmojiBtn","🎮");$("#background").append(a);var b=newElement("div","cheatPanel","","cheatPanel","");$("#background").append(b),$(b).hide();var c=newElement("div","cheatStatus","","cheatStatus","");$("#cheatPanel").append(c),updateCheatStatus(),createAttributeSection(),createPlaceholderSections(),$("#cheatEmojiBtn").click(toggleCheatPanel),console.log(CHEAT_LOG_PREFIX,"UI创建完成")}catch(a){console.error(CHEAT_LOG_PREFIX,"UI创建失败",a)}}function updateCheatStatus(){var a="金手指状态: "+(CHEAT_ENABLED?"已启用 ✅":"未启用 ❌");$("#cheatStatus").html(a),console.log(CHEAT_LOG_PREFIX,a)}function toggleCheatPanel(){try{typeof window.cheat!="undefined"&&typeof window.cheat.toggle=="function"?window.cheat.toggle():function(){var a=$("#cheatPanel").is(":visible");a?($("#cheatPanel").fadeOut(300),console.log(CHEAT_LOG_PREFIX,"面板已隐藏 🙈")):($("#cheatPanel").fadeIn(300),updateAllAttributeValues(),console.log(CHEAT_LOG_PREFIX,"面板已显示 👁️"))}()}catch(a){console.error(CHEAT_LOG_PREFIX,"切换面板失败",a)}}function updateAllAttributeValues(){try{for(var a in STATUS_LIST){var b=STATUS_LIST[a];PLAYER_STATUS[b]&&void 0!==PLAYER_STATUS[b].value&&$("#attr_"+b).val(Math.floor(PLAYER_STATUS[b].value))}for(var a in SPECIAL_LIST){var c=SPECIAL_LIST[a];PLAYER_STATUS[c]&&void 0!==PLAYER_STATUS[c].value&&$("#attr_"+c).val(Math.floor(PLAYER_STATUS[c].value))}updateLockButtonStatus()}catch(a){console.error(CHEAT_LOG_PREFIX,"更新属性值失败",a)}}function updateLockButtonStatus(){try{for(var a in["life","hunger","thirst","energy","san","radiation"]){var b=["life","hunger","thirst","energy","san","radiation"][a],c=$("#lock_"+b);c.length>0&&(LOCKED_STATUS[b]?($(c).text("🔒"),$(c).addClass("locked")):($(c).text("🔓"),$(c).removeClass("locked")))}}catch(a){console.error(CHEAT_LOG_PREFIX,"更新锁定按钮状态失败",a)}}function createAttributeSection(){try{var a=newElement("div","","cheatSection","cheatSection","<h3>属性修改</h3>"),b=newElement("div","","cheatQuickButtons","cheatQuickButtons",""),c=newElement("button","","","btn btn-primary","最大化状态");$(c).click(function(){window.cheat.maxStatus(),updateAllAttributeValues()}),$(b).append(c);var d=newElement("button","","","btn btn-success","最大化特殊属性");$(d).click(function(){window.cheat.maxSpecial(),updateAllAttributeValues()}),$(b).append(d);var e=newElement("button","","","btn btn-warning","锁定状态");$(e).click(function(){window.cheat.lockStatus(),updateAllAttributeValues(),updateLockButtonStatus()}),$(b).append(e);var f=newElement("button","","","btn btn-danger","解锁全部");$(f).click(function(){window.cheat.unlockAll(),updateAllAttributeValues(),updateLockButtonStatus()}),$(b).append(f),$(a).append(b);var g=newElement("div","","","cheatSubSection","<h4>基础属性</h4>");for(var h in STATUS_LIST){var i=STATUS_LIST[h],j=createAttributeRow(i,PLAYER_STATUS[i].name);$(g).append(j)}$(a).append(g);var k=newElement("div","","","cheatSubSection","<h4>特殊属性</h4>");for(var h in SPECIAL_LIST){var l=SPECIAL_LIST[h],j=createAttributeRow(l,PLAYER_STATUS[l].name);$(k).append(j)}$(a).append(k),$("#cheatPanel").append(a)}catch(a){console.error(CHEAT_LOG_PREFIX,"创建属性区域失败",a)}}function createAttributeRow(a,b){try{var c=newElement("div","","","cheatAttributeRow",""),d=newElement("label","","","",b);$(c).append(d);var e=newElement("input","attr_"+a,"","","");if($(e).attr("type","number"),$(e).attr("min","0"),PLAYER_STATUS[a]&&void 0!==PLAYER_STATUS[a].value&&$(e).val(Math.floor(PLAYER_STATUS[a].value)),$(e).change(function(){var b=parseInt($(this).val());modifyAttribute(a,b)}),$(c).append(e),maxBtn=newElement("button","","","btn btn-xs btn-default","最大"),$(maxBtn).click(function(){var b=PLAYER_STATUS[a].max||999;$("#attr_"+a).val(b),modifyAttribute(a,b)}),$(c).append(maxBtn),$.inArray(a,["life","hunger","thirst","energy","san","radiation"])!==-1){var f=newElement("button","lock_"+a,"","btn btn-xs btn-default lockBtn","🔓");LOCKED_STATUS[a]&&($(f).text("🔒"),$(f).addClass("locked")),$(f).click(function(){LOCKED_STATUS[a]?(delete LOCKED_STATUS[a],$(this).text("🔓"),$(this).removeClass("locked"),console.log(CHEAT_LOG_PREFIX,`已解锁 ${PLAYER_STATUS[a].name} 属性`)):(LOCKED_STATUS[a]=!0,$(this).text("🔒"),$(this).addClass("locked"),console.log(CHEAT_LOG_PREFIX,`已锁定 ${PLAYER_STATUS[a].name} 属性`))}),$(c).append(f)}return c}catch(a){return console.error(CHEAT_LOG_PREFIX,"创建属性行失败",a),document.createElement("div")}}function createPlaceholderSections(){try{var a=newElement("div","","cheatSection","cheatSection","<h3>物品操作</h3><p class='comingSoon'>功能开发中...</p>");$("#cheatPanel").append(a);var b=newElement("div","","cheatSection","cheatSection","<h3>地图功能</h3><p class='comingSoon'>功能开发中...</p>");$("#cheatPanel").append(b);var c=newElement("div","","cheatSection","cheatSection","<h3>战斗辅助</h3><p class='comingSoon'>功能开发中...</p>");$("#cheatPanel").append(c);var d=newElement("div","","cheatSection","cheatSection","<h3>控制台命令</h3>"),e=newElement("div","","","cheatConsoleHelp","");$(e).html("\n            <p>在浏览器控制台(F12)中可使用以下命令:</p>\n            <ul>\n                <li><code>cheat.help()</code> - 显示帮助</li>\n                <li><code>cheat.status()</code> - 显示状态</li>\n                <li><code>cheat.set('属性', 值)</code> - 设置属性值</li>\n                <li><code>cheat.max('属性')</code> - 最大化属性</li>\n                <li><code>cheat.maxAll()</code> - 全部最大化</li>\n            </ul>\n        "),$(d).append(e),$("#cheatPanel").append(d)}catch(a){console.error(CHEAT_LOG_PREFIX,"创建占位区域失败",a)}}function modifyAttribute(a,b){try{if(void 0!==PLAYER_STATUS[a]&&void 0!==PLAYER_STATUS[a].value){var c=PLAYER_STATUS[a].value;PLAYER_STATUS[a].value=b,updateStatus(a),console.log(CHEAT_LOG_PREFIX,`已修改 ${PLAYER_STATUS[a].name}: ${c} → ${b}`),showMsg("已修改 "+PLAYER_STATUS[a].name+" 为 "+b)}}catch(a){console.error(CHEAT_LOG_PREFIX,"修改属性失败",a)}}function addCheatStyles(){try{var a=document.createElement("style");a.type="text/css",a.innerHTML="\n        #cheatEmojiBtn {\n            position: fixed;\n            right: 10px;\n            top: 10px;\n            font-size: 24px;\n            background-color: rgba(0, 0, 0, 0.5);\n            color: #fff;\n            width: 40px;\n            height: 40px;\n            line-height: 40px;\n            text-align: center;\n            border-radius: 50%;\n            cursor: pointer;\n            z-index: 1000;\n            opacity: 0.7;\n            transition: all 0.3s ease;\n        }\n        \n        #cheatEmojiBtn:hover {\n            opacity: 1;\n            transform: scale(1.1);\n            background-color: rgba(255, 50, 50, 0.7);\n        }\n        \n        .cheatPanel {\n            position: fixed;\n            top: 60px;\n            right: 10px;\n            width: 300px;\n            max-height: 80vh;\n            overflow-y: auto;\n            background-color: rgba(0, 0, 0, 0.85);\n            border: 1px solid #666;\n            border-radius: 5px;\n            padding: 10px;\n            z-index: 1000;\n            color: #fff;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n        }\n        \n        .cheatStatus {\n            background-color: rgba(0, 0, 0, 0.5);\n            padding: 5px;\n            margin-bottom: 10px;\n            border-radius: 3px;\n            text-align: center;\n            font-weight: bold;\n            color: #ffcc00;\n        }\n        \n        .cheatSection {\n            margin-bottom: 15px;\n            padding-bottom: 10px;\n            border-bottom: 1px solid #555;\n        }\n        \n        .cheatSection h3 {\n            color: #ff9900;\n            font-size: 16px;\n            margin-top: 5px;\n            margin-bottom: 10px;\n        }\n        \n        .cheatSection h4 {\n            color: #ffcc00;\n            font-size: 14px;\n            margin-top: 10px;\n            margin-bottom: 5px;\n        }\n        \n        .cheatQuickButtons {\n            display: flex;\n            justify-content: center;\n            margin-bottom: 10px;\n        }\n        \n        .cheatQuickButtons button {\n            margin: 0 5px;\n        }\n        \n        .cheatSubSection {\n            margin-bottom: 10px;\n            padding: 5px;\n            background-color: rgba(255, 255, 255, 0.05);\n            border-radius: 3px;\n        }\n        \n        .cheatSection button {\n            margin: 2px;\n            font-size: 12px;\n        }\n        \n        .cheatAttributeRow {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 5px;\n        }\n        \n        .cheatAttributeRow label {\n            flex: 1;\n        }\n        \n        .cheatAttributeRow input {\n            width: 60px;\n            background-color: #333;\n            color: #fff;\n            border: 1px solid #555;\n            padding: 2px 5px;\n            margin-right: 5px;\n        }\n    \n    .lockBtn {\n        width: 30px;\n        margin-left: 2px !important;\n    }\n    \n    .lockBtn.locked {\n        background-color: #ff9900;\n        color: #000;\n    }\n        \n        .comingSoon {\n            color: #999;\n            font-style: italic;\n            text-align: center;\n            padding: 10px;\n        }\n        \n        .cheatConsoleHelp {\n            background-color: rgba(0, 0, 0, 0.3);\n            padding: 10px;\n            border-radius: 3px;\n            font-size: 12px;\n        }\n        \n        .cheatConsoleHelp code {\n            background-color: #333;\n            padding: 2px 4px;\n            border-radius: 3px;\n            color: #ffcc00;\n        }\n        ",document.head.appendChild(a),console.log(CHEAT_LOG_PREFIX,"样式添加完成")}catch(a){console.error(CHEAT_LOG_PREFIX,"添加样式失败",a)}}$(document).ready(function(){console.log(CHEAT_LOG_PREFIX,"等待游戏加载...");var a=setInterval(function(){"undefined"!=typeof PLAYER_STATUS&&"undefined"!=typeof STATUS_LIST&&(console.log(CHEAT_LOG_PREFIX,"游戏已加载，初始化金手指..."),initCheat(),clearInterval(a))},1e3);$(document).on("click","#startBtn",function(){console.log(CHEAT_LOG_PREFIX,"检测到游戏开始，确保金手指可用..."),setTimeout(function(){0===$("#cheatEmojiBtn").length&&(console.log(CHEAT_LOG_PREFIX,"金手指按钮不存在，重新初始化..."),initCheat())},2e3)}),$(document).keydown(function(a){a.ctrlKey&&a.shiftKey&&67===a.which&&(console.log(CHEAT_LOG_PREFIX,"检测到快捷键，切换金手指面板"),"undefined"!=typeof window.cheat?window.cheat.toggle():CHEAT_ENABLED?toggleCheatPanel():(console.log(CHEAT_LOG_PREFIX,"金手指未初始化，尝试初始化..."),initCheat(),setTimeout(function(){toggleCheatPanel()},500)))})});